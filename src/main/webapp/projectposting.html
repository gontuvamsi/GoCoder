<html lang="en">
<head>
<meta charset="utf-8" />
<meta content="width=device-width, initial-scale=1.0" name="viewport" />
<title>Post a new Project</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
	rel="stylesheet" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">
<link
	href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
	rel="stylesheet">
<style>
body {
	font-family: 'Roboto', sans-serif;
}
</style>
</head>
<body class="bg-light p-4">
	<div class="container bg-white p-5 rounded shadow-sm">
		<header
			class="d-flex justify-content-between align-items-center mb-4 bg-primary p-3 rounded">
			<div class="d-flex align-items-center">
				<span class="h4 text-white mb-0">GoCoders</span>
			</div>
			<nav class="d-flex gap-3">
				<a class="text-white text-decoration-none"
					href="customerdashboard.html">Dashboard</a> <a
					class="text-pink-300 text-decoration-none" href="#">My Projects</a>
				<a class="text-white text-decoration-none" href="home.html">Logout</a>
			</nav>
		</header>





		<form id="project-form" action="#" method="POST">
    <div class="container">
        <h2 class="text-center mb-4">Post a New Project</h2>

        <!-- Project Title -->
        <div class="mb-3">
            <label class="form-label" for="title">Project Title:</label>
            <input class="form-control" name="title" id="title" type="text" required />
        </div>

        <!-- Project Description -->
        <div class="mb-3">
            <label class="form-label" for="description">Project Description:</label>
            <textarea class="form-control" id="description" name="description" rows="4" required></textarea>
        </div>

        <!-- Technology/Stack Required -->
        <div class="mb-3">
            <label class="form-label" for="technology">Technology/Stack Required:</label>
            <select class="form-select" name="technology" id="technology" required>
                <option value="" disabled selected>Select Technology</option>
                <option>Java</option>
                <option>Python</option>
                <option>UI/UX</option>
                <option>React</option>
                <option>Machine Learning</option>
                <option>Others</option>
            </select>
        </div>

        <!-- Project Category -->
        <div class="mb-3">
            <label class="form-label" for="category">Project Category:</label>
            <select class="form-select" name="category" id="category" required>
                <option value="" disabled selected>Select Category</option>
                <option>Web Development</option>
                <option>Android Development</option>
                <option>DevOps</option>
                <option>Mean Stack</option>
                <option>Mern Stack</option>
            </select>
        </div>

        <!-- Target Deadline -->
				<div class="mb-3">
					<label class="form-label" for="deadline">Target Deadline:</label> <input
						class="form-control" name="deadline" id="deadline" type="date"
						required />
				</div>

				<!-- Budget Range -->
        <div class="mb-3">
            <label class="form-label">Budget Range:</label>
            <div class="row">
                <div class="col">
                    <label class="form-label" for="min_budget">Min:</label>
                    <input class="form-control" name="min_budget" id="min_budget" type="number" min="0" required />
                </div>
                <div class="col">
                    <label class="form-label" for="max_budget">Max:</label>
                    <input class="form-control" name="max_budget" id="max_budget" type="number" min="0" required />
                </div>
            </div>
        </div>

        <!-- Visibility -->
        <div class="mb-3">
            <label class="form-label" for="visibility">Visibility:</label>
            <select class="form-select" name="visibility" id="visibility" required>
                <option value="" disabled selected>Select Visibility</option>
                <option>Public</option>
                <option>Private</option>
            </select>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
            <button class="btn btn-success w-100" type="submit">Submit Project</button>
        </div>
    </div>
</form>

		<div id="error-message" class="alert alert-danger mt-4 d-none"
			role="alert">Please fix the errors above and try again.</div>
		<div id="success-message" class="alert alert-success mt-4 d-none"
			role="alert">Project posted successfully!</div>
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script>
    document.addEventListener("DOMContentLoaded", function () {
        const deadlineInput = document.getElementById("deadline");

        // Set the min attribute to today's date
        const today = new Date().toISOString().split("T")[0];
        deadlineInput.setAttribute("min", today);
    });
</script>
	<script>
	
		document.getElementById("project-form").onsubmit = function(event) {
			let isValid = true;

			const title = document.getElementById("title").value;
			const description = document.getElementById("description").value;
			const technology = document.getElementById("technology").value;
			const category = document.getElementById("category").value;
			const deadline = document.getElementById("deadline").value;
			const minBudget = document.getElementById("min_budget").value;
			const maxBudget = document.getElementById("max_budget").value;
			const visibility = document.getElementById("visibility").value;

			if (!title || !description || !technology || !category || !deadline
					|| !minBudget || !maxBudget || !visibility) {
				isValid = false;
				document.getElementById("error-message").classList
						.remove("d-none");
			} else {
				document.getElementById("error-message").classList
						.add("d-none");
			}

			if (parseFloat(minBudget) > parseFloat(maxBudget)) {
				isValid = false;
				alert("Min budget should be less than Max budget.");
			}

			if (!isValid) {
				event.preventDefault();
			}
		}
	</script>
	
	<script>
		$(document).ready(function() {
			$("#project-form").submit(function(event) {
				event.preventDefault(); // Prevent default form submission

				// Collect form data
				var formData = {
					title : $("#title").val(),
					description : $("#description").val(),
					technology : $("#technology").val(),
					category : $("#category").val(),
					deadline : $("#deadline").val(),
					min_budget : $("#min_budget").val(),
					max_budget : $("#max_budget").val(),
					visibility : $("#visibility").val()
				};

				// Send AJAX request
				$.ajax({
					type : "POST",
					url : "ProjectServlet/ProjectPostingServlet",
					data : formData,
					dataType : "json",
					success : function(response) {
						if (response.status === "success") {
							alert(response.message);
							$("#project-form")[0].reset(); // Reset form fields after successful submission
						} else {
							alert("Error: " + response.message);
						}
					},
					error : function(xhr, status, error) {
						alert("An error occurred: " + xhr.responseText);
					}
				});
			});
		});
	</script>

</body>
</html>